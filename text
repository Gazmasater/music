CREATE TABLE artists (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE song_details (
    id SERIAL PRIMARY KEY,
    artist_id INTEGER REFERENCES artists(id) ON DELETE CASCADE,
    group_name VARCHAR(255) NOT NULL,
    song_name VARCHAR(255) NOT NULL,
    release_date TIMESTAMP,
    text JSONB,
    song_url VARCHAR(255),  -- Добавляем поле для ссылки на песню
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE (song_name, artist_id)  -- Уникальное ограничение на комбинацию названия песни и ID исполнителя
);





SELECT 
    sd.song_name AS "song_name", 
    a.name AS "artist_name"
FROM 
    song_details sd
JOIN 
    artists a ON sd.artist_id = a.id;


    DELETE FROM artists CASCADE;
    DROP TABLE song_details ;
    DROP TABLE artists ;




